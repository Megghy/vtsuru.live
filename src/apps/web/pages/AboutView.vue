<script setup lang="ts">
import { CodeOutline, HeartOutline, LogoGithub, ServerOutline } from '@vicons/ionicons5'
import { formatDistanceToNow } from 'date-fns'
import { zhCN } from 'date-fns/locale'
import { NButton, NCard, NDivider, NIcon, NLayoutContent, NFlex, NTag, NText, NTimeline, NTimelineItem, useThemeVars } from 'naive-ui';
import { computed } from 'vue'
import UpdateNoteContainer from '@/apps/web/components/UpdateNoteContainer.vue'

// è·å–ç¼–è¯‘æ—¶é—´
const buildTime = computed(() => {
  try {
    const buildDate = new Date(__BUILD_TIME__)
    return {
      date: buildDate.toLocaleString('zh-CN'),
      relative: formatDistanceToNow(buildDate, { addSuffix: true, locale: zhCN }),
    }
  } catch {
    return {
      date: 'æœªçŸ¥',
      relative: 'æœªçŸ¥',
    }
  }
})
const themeVars = useThemeVars()
</script>

<template>
  <NLayoutContent style="height: 100vh; padding: 20px 0;">
    <NFlex
      style="margin-top: 30px"
      justify="center"
      align="center"
      vertical
    >
      <NCard
        style="max-width: 80vw; width: 700px;"
        embedded
      >
        <template #header>
          <div style="font-size: 22px; font-weight: bold; padding: 8px 0;">
            å…³äº
          </div>
          <NText depth="3" style="font-size: 13px; margin-top: 4px; padding-bottom: 8px;">
            æ„å»ºæ—¶é—´: {{ buildTime.date }} ({{ buildTime.relative }})
          </NText>
        </template>
        <NText>
          ä¸€ä¸ªå…´è¶£ä½¿ç„¶çš„ç½‘ç«™
          <br>
          åé¦ˆ | å»ºè®® | éœ€æ±‚ | é—²èŠ: ğŸ§
          <NButton
            tag="a"
            type="info"
            target="_blank"
            href="http://qm.qq.com/cgi-bin/qm/qr?_wv=1027&k=uJNTU6LQ7xANoxP1IyZxS1xYkOKVOF7G&authKey=nl3Bv4UascE4tJ98UDTihEZSvivzuaQGfMViy1BqUe5lYgrz6hi0huK6dyAYq1hi&noverify=0&group_code=873260337"
            text
          >
            873260337
          </NButton>
          æˆ–è€…
          <NButton
            text
            type="info"
            @click="$router.push({ name: 'manage-feedback' })"
          >
            åé¦ˆé¡µé¢
          </NButton>
          <NDivider vertical />
          <NButton
            tag="a"
            type="info"
            href="mailto:admin@vtsuru.live"
            text
          >
            admin@vtsuru.live
          </NButton>
        </NText>
        <template #footer>
          <NFlex
            vertical
            align="center"
            style="margin-bottom: 16px;"
          >
            <NText depth="3" style="font-size: 14px; display: flex; align-items: center; justify-content: center; gap: 6px;">
              MADE WITH <NIcon
                size="18"
                :color="themeVars.errorColor"
              >
                <HeartOutline />
              </NIcon> BY
              <NButton
                type="primary"
                tag="a"
                href="https://space.bilibili.com/10021741"
                target="_blank"
                text
                style="font-weight: bold;"
              >
                Megghy
              </NButton>
            </NText>
            <div style="margin-top: 8px; display: flex; align-items: center; gap: 8px;">
              <NButton
                tag="a"
                href="https://github.com/Megghy/vtsuru.live"
                target="_blank"
                text
                style="display: flex; align-items: center; gap: 4px;"
              >
                <NIcon size="16">
                  <LogoGithub />
                </NIcon>
                <span>æºä»£ç ä»“åº“</span>
              </NButton>
              <NButton
                tag="a"
                href="https://stats.uptimerobot.com/vGKZv8uhVC"
                target="_blank"
                text
                style="display: flex; align-items: center; gap: 4px;"
              >
                <NIcon size="16">
                  <ServerOutline />
                </NIcon>
                <span>æœåŠ¡çŠ¶æ€</span>
              </NButton>
            </div>
          </NFlex>
          <NDivider
            title-placement="left"
            style="margin-top: 12px;"
          >
            <div style="display: flex; align-items: center; gap: 6px;">
              <span>æŠ€æœ¯æ ˆ</span>
            </div>
          </NDivider>
          <NFlex
            vertical
            style="padding: 0 12px; margin-bottom: 16px;"
          >
            <div style="display: flex; align-items: center; gap: 8px;">
              <NIcon
                size="20"
                :color="themeVars.successColor"
              >
                <CodeOutline />
              </NIcon>
              <NText style="font-weight: 500;">
                å‰ç«¯:
              </NText>
              <NTag
                type="success"
                size="small"
                round
                :bordered="false"
              >
                <NButton
                  tag="a"
                  href="https://vuejs.org/"
                  target="_blank"
                  text
                  style="padding: 0; color: inherit;"
                >
                  Vue.js
                </NButton>
              </NTag>
              <NTag
                type="info"
                size="small"
                round
                :bordered="false"
              >
                <NButton
                  tag="a"
                  href="https://www.typescriptlang.org/"
                  target="_blank"
                  text
                  style="padding: 0; color: inherit;"
                >
                  TypeScript
                </NButton>
              </NTag>
              <NTag
                type="warning"
                size="small"
                round
                :bordered="false"
              >
                <NButton
                  tag="a"
                  href="https://www.naiveui.com/"
                  target="_blank"
                  text
                  style="padding: 0; color: inherit;"
                >
                  Naive UI
                </NButton>
              </NTag>
            </div>
            <div style="display: flex; align-items: center; gap: 8px;">
              <NIcon
                size="20"
                :color="themeVars.infoColor"
              >
                <ServerOutline />
              </NIcon>
              <NText style="font-weight: 500;">
                åç«¯:
              </NText>
              <NTag
                type="primary"
                size="small"
                round
                :bordered="false"
              >
                <NButton
                  tag="a"
                  href="https://dotnet.microsoft.com/"
                  target="_blank"
                  text
                  style="padding: 0; color: inherit;"
                >
                  C# .NET 10
                </NButton>
              </NTag>
              <NTag
                type="error"
                size="small"
                round
                :bordered="false"
              >
                <NButton
                  tag="a"
                  href="https://www.postgresql.org/"
                  target="_blank"
                  text
                  style="padding: 0; color: inherit;"
                >
                  PostgreSQL
                </NButton>
              </NTag>
              <NTag
                type="default"
                size="small"
                round
                :bordered="false"
              >
                <NButton
                  tag="a"
                  href="https://microsoft.github.io/garnet/"
                  target="_blank"
                  text
                  style="padding: 0; color: inherit;"
                >
                  Garnet
                </NButton>
              </NTag>
            </div>
          </NFlex>
          <NDivider title-placement="left">
            <div style="display: flex; align-items: center; gap: 6px;">
              <span>èµåŠ©æˆ‘</span>
            </div>
          </NDivider>
          <iframe
            id="afdian_leaflet_vtsuru"
            src="https://afdian.com/leaflet?slug=vtsuru"
            width="100%"
            scrolling="no"
            height="200"
            frameborder="0"
            :style="{ borderRadius: themeVars.borderRadius }"
          />
          <NDivider title-placement="left">
            <div style="display: flex; align-items: center; gap: 6px;">
              <span>æ›´æ–°æ—¥å¿—</span>
            </div>
          </NDivider>
          <UpdateNoteContainer />
          <NDivider />
          <NTimeline>
            <NTimelineItem
              type="info"
              title="åŠŸèƒ½æ›´æ–°"
              content="æ–°å¢æ­Œå•æ ·å¼: åˆ—è¡¨"
              time="2025-3-31"
            />
            <NTimelineItem
              type="success"
              title="åŠŸèƒ½æ·»åŠ "
              content="ä¸Šçº¿ç›´æ’­æ•°æ®åˆ†æ"
              time="2025-3-18"
            />
            <NTimelineItem
              type="info"
              title="åŠŸèƒ½æ·»åŠ "
              content="ç‚¹æ­Œå…è®¸ä»ç½‘é¡µåŒ¿åç‚¹æ­Œ"
              time="2025-3-18"
            />
            <NTimelineItem
              type="success"
              title="åŠŸèƒ½æ·»åŠ "
              content="æ£‰èŠ±ç³–æ·»åŠ å†…å®¹å®¡æŸ¥åŠŸèƒ½"
              time="2025-3-2"
            />
            <NTimelineItem
              type="info"
              title="åŠŸèƒ½æ›´æ–°"
              content="å…è®¸æ£‰èŠ±ç³–è®¾ç½®é¡µæ»šåŠ¨æ¡è¿›åº¦åŒæ­¥åˆ°obsç»„ä»¶"
              time="2024-11-23"
            />
            <NTimelineItem
              type="info"
              title="åŠŸèƒ½æ›´æ–°"
              content="ç¤¼ç‰©å…‘æ¢å…è®¸ä¸Šèˆ°ç”¨æˆ·å…è´¹å…‘æ¢, ä»¥åŠä»…å…è®¸ä¸Šèˆ°ç”¨æˆ·å…‘æ¢"
              time="2024-4-23"
            />
            <NTimelineItem
              type="info"
              title="åŠŸèƒ½æ›´æ–°"
              content="ç§¯åˆ†è®¢å•æ·»åŠ å¯¼å‡ºåŠŸèƒ½, å…è®¸åˆ é™¤ç§¯åˆ†ç”¨æˆ·"
              time="2024-3-22"
            />
            <NTimelineItem
              type="info"
              title="åŠŸèƒ½æ›´æ–°"
              content="1. ç‚¹æ­Œ(æ­ŒåŠ¿) ä¿®æ”¹ä¸ºç‚¹æ’­ 2. æ£‰èŠ±ç³–æ”¯æŒåˆ›å»ºè¯é¢˜(æ ‡ç­¾) 3. ä¸€äº›bugä¿®å¤"
              time="2024-3-12"
            />
            <NTimelineItem
              type="info"
              title="åŠŸèƒ½æ›´æ–°"
              content="æ£‰èŠ±ç³–æ·»åŠ å±•ç¤ºé¡µé¢"
              time="2024-2-20"
            />
            <NTimelineItem
              type="info"
              title="åŠŸèƒ½æ›´æ–°"
              content="æ­Œå•æ–°å¢ä»æ–‡ä»¶å¯¼å…¥"
              time="2024-2-10"
            />
            <NTimelineItem
              type="info"
              title="åŠŸèƒ½æ›´æ–°"
              content="æ’é˜Ÿçš„OBSç»„ä»¶æ·»åŠ è®¾ç½®é¡¹"
              time="2024-1-27"
            />
            <NTimelineItem
              type="warning"
              title="Bugä¿®å¤"
              content="ä¿®å¤ç‚¹æ­Œä¼šç›´æ¥è·³åˆ°ä¸‹ä¸€é¦–çš„é—®é¢˜ (æ€ä¹ˆæ²¡äººè·Ÿæˆ‘è¯´"
              time="2024-1-22"
            />
            <NTimelineItem
              type="info"
              title="åŠŸèƒ½æ›´æ–°"
              content="è¯»å¼¹å¹•æ”¯æŒè‡ªå®šä¹‰API"
              time="2023-12-25"
            />
            <NTimelineItem
              type="success"
              title="åŠŸèƒ½æ·»åŠ "
              content="å¼¹å¹•ç‚¹æ­Œ (ç‚¹æ’­)"
              time="2023-12-24"
            />
            <NTimelineItem
              type="success"
              title="åŠŸèƒ½æ·»åŠ "
              content="è¯»å¼¹å¹•"
              time="2023-12-17"
            />
            <NTimelineItem
              type="success"
              title="åŠŸèƒ½æ·»åŠ "
              content="ç›´æ’­è®°å½•"
              time="2023-12-3"
            />
            <NTimelineItem
              type="info"
              title="åŠŸèƒ½æ›´æ–°"
              content="æ­Œå•æ·»åŠ  'ç®€å•' æ¨¡æ¿"
              time="2023-11-30"
            />
            <NTimelineItem
              type="success"
              title="åŠŸèƒ½æ·»åŠ "
              content="æ’é˜Ÿ"
              time="2023-11-25"
            />
            <NTimelineItem
              type="success"
              title="åŠŸèƒ½æ·»åŠ "
              content="ç‚¹æ­Œ"
              time="2023-11-20"
            />
            <NTimelineItem
              type="success"
              title="ä¸Šæ¶å¹»æ˜Ÿå¹³å°"
              content="å¦‚é¢˜"
              time="2023-11-4"
            />
            <NTimelineItem
              type="success"
              title="åŠŸèƒ½æ·»åŠ "
              content="è§†é¢‘å¾é›†"
              time="2023-10-30"
            />
            <NTimelineItem
              type="info"
              title="åŠŸèƒ½æ›´æ–°"
              content="æ—¥ç¨‹è¡¨æ·»åŠ  'ç²‰ç²‰' æ¨¡æ¿"
              time="2023-10-27"
            />
            <NTimelineItem
              type="info"
              title="åŠŸèƒ½æ›´æ–°"
              content="æé—®ç®±æ–°å¢å…¬å¼€é€‰é¡¹"
              time="2023-10-26"
            />
            <NTimelineItem
              type="success"
              title="åŠŸèƒ½æ·»åŠ "
              content="æé—®ç®±åˆ†äº«å¡ç‰‡"
              time="2023-10-25"
            />
            <NTimelineItem
              type="success"
              title="åŠŸèƒ½æ·»åŠ "
              content="èˆ°é•¿åŠSCè®°å½•"
              time="2023-10-24"
              line-type="dashed"
            />
            <NTimelineItem
              type="info"
              content="å¼€å§‹è¿è¡Œ"
              time="2023-10-23"
            />
          </NTimeline>
        </template>
      </NCard>
      <NButton
        type="primary"
        size="large"
        style="margin-top: 20px;"
        @click="$router.push({ name: 'manage-index' })"
      >
        å›åˆ°æ§åˆ¶å°
      </NButton>
    </NFlex>
  </NLayoutContent>
</template>

<style scoped>
:deep(.n-timeline) {
  padding: 0 8px;
}

:deep(.n-timeline-item-content) {
  margin-bottom: 12px;
}

:deep(.n-divider.n-divider--title-position-left .n-divider__title) {
  font-weight: 600;
  font-size: 16px;
  color: var(--n-text-color);
}

:deep(.n-timeline-item-content__title) {
  font-weight: 600;
}

:deep(.n-timeline-item-content__content) {
  color: var(--n-text-color-2);
}

:deep(.n-timeline-item-content__time) {
  color: var(--n-text-color-3);
  font-size: 13px;
}
</style>
